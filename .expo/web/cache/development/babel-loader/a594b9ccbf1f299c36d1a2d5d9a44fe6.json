{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _api = require(\"../../api\");\nvar _components = require(\"../../components\");\nvar _CastList = require(\"../movieDetail/components/CastList\");\nvar _themes = require(\"../../themes\");\nvar _lodash = require(\"lodash\");\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _reactNative = require(\"react-native\");\nvar _reactNativeYoutubeIframe = _interopRequireDefault(require(\"react-native-youtube-iframe\"));\nvar _TVPoster = require(\"./components/TVPoster\");\nvar _TVSummary = require(\"./components/TVSummary\");\nvar _this = this,\n  _jsxFileName = \"D:\\\\EPU\\\\k\\xEC 1 2022-2023\\\\ltmobile\\\\muvi-master\\\\src\\\\features\\\\tvDetail\\\\TVDetail.tsx\";\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\nvar TVDetailScreen = function TVDetailScreen(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var tvId = route.params.tvId;\n  var _useState = (0, _react.useState)(null),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    details = _useState2[0],\n    setDetails = _useState2[1];\n  var _useState3 = (0, _react.useState)(0),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    activeTab = _useState4[0],\n    setActiveTab = _useState4[1];\n  var _useState5 = (0, _react.useState)(),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    casts = _useState6[0],\n    setCasts = _useState6[1];\n  var _useState7 = (0, _react.useState)(''),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    videoId = _useState8[0],\n    setVideoId = _useState8[1];\n  (0, _react.useEffect)(function () {\n    getTVDetail();\n  }, [navigation, route]);\n  var tabOnPress = function tabOnPress(tabIndex) {\n    setActiveTab(tabIndex);\n  };\n  var getTVDetail = (0, _react.useCallback)(function _callee() {\n    var _videoResponse$result;\n    var _await$Promise$all, _await$Promise$all2, details, creditResponse, videoResponse;\n    return _regenerator.default.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regenerator.default.awrap(Promise.all([_api.tvApi.getDetails(tvId), _api.tvApi.getTVCredit(tvId), _api.tvApi.getVideo(tvId)]));\n          case 2:\n            _await$Promise$all = _context.sent;\n            _await$Promise$all2 = (0, _slicedToArray2.default)(_await$Promise$all, 3);\n            details = _await$Promise$all2[0];\n            creditResponse = _await$Promise$all2[1];\n            videoResponse = _await$Promise$all2[2];\n            setDetails(details);\n            setCasts((0, _lodash.take)(creditResponse.cast, 10));\n            setVideoId(videoResponse == null ? void 0 : (_videoResponse$result = videoResponse.results[0]) == null ? void 0 : _videoResponse$result.key);\n          case 10:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }, [tvId]);\n  if (!details) return _react.default.createElement(_reactNative.View, {\n    style: styles.loadingWrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.ActivityIndicator, {\n    size: \"large\",\n    color: _themes.color.primary,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }));\n  return _react.default.createElement(_reactNative.View, {\n    style: styles.wrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.ScrollView, {\n    showsVerticalScrollIndicator: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_TVPoster.MemoizedTVPoster, {\n    tv: details,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_reactNative.View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: styles.tabs,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.TouchableOpacity, {\n    onPress: function onPress() {\n      return tabOnPress(0);\n    },\n    style: [styles.tabButton, activeTab === 0 ? styles.tabActive : {}],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_components.Text, {\n    text: \"Summary\",\n    preset: \"medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 15\n    }\n  })), _react.default.createElement(_reactNative.TouchableOpacity, {\n    onPress: function onPress() {\n      return tabOnPress(1);\n    },\n    style: [styles.tabButton, activeTab === 1 ? styles.tabActive : {}],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_components.Text, {\n    text: \"Trailer\",\n    preset: \"medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  })), _react.default.createElement(_reactNative.TouchableOpacity, {\n    onPress: function onPress() {\n      return tabOnPress(2);\n    },\n    style: [styles.tabButton, activeTab === 2 ? styles.tabActive : {}],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_components.Text, {\n    text: \"Casts\",\n    preset: \"medium\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 15\n    }\n  }))), activeTab === 0 && _react.default.createElement(_TVSummary.MemoizedTVSummary, {\n    details: details,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 31\n    }\n  }), activeTab === 2 && casts && _react.default.createElement(_CastList.CastList, {\n    casts: casts,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 40\n    }\n  }), activeTab === 1 && videoId && _react.default.createElement(_reactNative.View, {\n    style: {\n      paddingHorizontal: _themes.spacing[4],\n      marginTop: _themes.spacing[4]\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNativeYoutubeIframe.default, {\n    height: 320,\n    play: true,\n    videoId: videoId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  })))));\n};\nvar _default = TVDetailScreen;\nexports.default = _default;\nvar styles = _reactNative.StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    backgroundColor: _themes.color.background\n  },\n  loadingWrapper: {\n    flex: 1,\n    backgroundColor: _themes.color.background,\n    justifyContent: 'center'\n  },\n  tabs: {\n    flexDirection: 'row',\n    justifyContent: 'space-around'\n  },\n  tabButton: {\n    paddingHorizontal: _themes.spacing[4],\n    paddingVertical: _themes.spacing[4]\n  },\n  tabActive: {\n    borderBottomWidth: 2,\n    borderBottomColor: _themes.color.primary\n  }\n});","map":{"version":3,"names":["TVDetailScreen","navigation","route","tvId","params","useState","details","setDetails","activeTab","setActiveTab","casts","setCasts","videoId","setVideoId","useEffect","getTVDetail","tabOnPress","tabIndex","useCallback","Promise","all","tvApi","getDetails","getTVCredit","getVideo","creditResponse","videoResponse","take","cast","results","key","styles","loadingWrapper","color","primary","wrapper","tabs","tabButton","tabActive","paddingHorizontal","spacing","marginTop","StyleSheet","create","flex","backgroundColor","background","justifyContent","flexDirection","paddingVertical","borderBottomWidth","borderBottomColor"],"sources":["D:/EPU/k√¨ 1 2022-2023/ltmobile/muvi-master/src/features/tvDetail/TVDetail.tsx"],"sourcesContent":["import { tvApi } from '@api';\nimport { Text } from '@components';\nimport { CastList } from '@features/movieDetail/components/CastList';\nimport { Cast, MovieCreditResponse, TVDetail } from '@models';\nimport { MainNavigatorParams } from '@navigation/mainNavigator';\nimport { StackScreenProps } from '@react-navigation/stack';\nimport { color, spacing } from '@themes';\nimport { take } from 'lodash';\nimport React, { FC, useCallback, useEffect, useState } from 'react';\nimport {\n  ActivityIndicator,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  View,\n} from 'react-native';\nimport YoutubePlayer from 'react-native-youtube-iframe';\nimport { MemoizedTVPoster } from './components/TVPoster';\nimport { MemoizedTVSummary } from './components/TVSummary';\n\nconst TVDetailScreen: FC<StackScreenProps<MainNavigatorParams, 'tvDetail'>> = ({\n  navigation,\n  route,\n}) => {\n  const tvId = route.params.tvId;\n  const [details, setDetails] = useState<TVDetail | null>(null);\n  // const [relatedList, setRelatedList] = useState<TV[]>([]);\n  const [activeTab, setActiveTab] = useState(0);\n  const [casts, setCasts] = useState<Cast[]>();\n  const [videoId, setVideoId] = useState('');\n\n  useEffect(() => {\n    getTVDetail();\n  }, [navigation, route]);\n\n  const tabOnPress = (tabIndex: number) => {\n    setActiveTab(tabIndex);\n  };\n\n  const getTVDetail = useCallback(async () => {\n    const [details, creditResponse, videoResponse] = await Promise.all<\n      TVDetail,\n      MovieCreditResponse,\n      any\n    >([tvApi.getDetails(tvId), tvApi.getTVCredit(tvId), tvApi.getVideo(tvId)]);\n    setDetails(details);\n    setCasts(take(creditResponse.cast, 10));\n    setVideoId(videoResponse?.results[0]?.key);\n  }, [tvId]);\n\n  if (!details)\n    return (\n      <View style={styles.loadingWrapper}>\n        <ActivityIndicator size='large' color={color.primary} />\n      </View>\n    );\n\n  return (\n    <View style={styles.wrapper}>\n      <ScrollView showsVerticalScrollIndicator={false}>\n        <MemoizedTVPoster tv={details} />\n        <View>\n          <View style={styles.tabs}>\n            <TouchableOpacity\n              onPress={() => tabOnPress(0)}\n              style={[\n                styles.tabButton,\n                activeTab === 0 ? styles.tabActive : {},\n              ]}\n            >\n              <Text text='Summary' preset='medium' />\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => tabOnPress(1)}\n              style={[\n                styles.tabButton,\n                activeTab === 1 ? styles.tabActive : {},\n              ]}\n            >\n              <Text text='Trailer' preset='medium' />\n            </TouchableOpacity>\n            <TouchableOpacity\n              onPress={() => tabOnPress(2)}\n              style={[\n                styles.tabButton,\n                activeTab === 2 ? styles.tabActive : {},\n              ]}\n            >\n              <Text text='Casts' preset='medium' />\n            </TouchableOpacity>\n          </View>\n          {activeTab === 0 && <MemoizedTVSummary details={details} />}\n          {activeTab === 2 && casts && <CastList casts={casts} />}\n          {activeTab === 1 && videoId && (\n            <View\n              style={{ paddingHorizontal: spacing[4], marginTop: spacing[4] }}\n            >\n              <YoutubePlayer height={320} play={true} videoId={videoId} />\n            </View>\n          )}\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nexport default TVDetailScreen;\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    flex: 1,\n    backgroundColor: color.background,\n    // paddingBottom: spacing[6],\n  },\n  loadingWrapper: {\n    flex: 1,\n    backgroundColor: color.background,\n    justifyContent: 'center',\n  },\n\n  tabs: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n  },\n  tabButton: {\n    paddingHorizontal: spacing[4],\n    paddingVertical: spacing[4],\n  },\n  tabActive: {\n    borderBottomWidth: 2,\n    borderBottomColor: color.primary,\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}